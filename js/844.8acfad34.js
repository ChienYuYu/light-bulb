"use strict";(self["webpackChunklight_bulb"]=self["webpackChunklight_bulb"]||[]).push([[844],{8013:function(e,t,o){o.d(t,{Z:function(){return u}});var r=o(3396),n=o(7139);const s={class:"footer"};function c(e,t,o,c,l,a){return(0,r.wg)(),(0,r.iD)("div",s,[(0,r._)("h3",null,"© "+(0,n.zw)(c.year)+" by Chen Chien Yu",1)])}var l={setup(){const e=(new Date).getFullYear();return{year:e}}},a=o(89);const i=(0,a.Z)(l,[["render",c],["__scopeId","data-v-b977a274"]]);var u=i},4006:function(e,t,o){o.d(t,{Z:function(){return _}});var r=o(3396),n=o(7139);const s={class:"progress-bar"};function c(e,t,o,c,l,a){return(0,r.wg)(),(0,r.iD)("ul",s,[(0,r._)("li",{class:(0,n.C_)(["left",{active:1===c.step}])},"1.確認訂單",2),(0,r._)("li",{class:(0,n.C_)({active:2===c.step})},"2.填寫資料",2),(0,r._)("li",{class:(0,n.C_)(["right",{active:3===c.step}])},"3.送出訂單",2)])}var l=o(4870),a=o(2483),i={setup(){const e=(0,a.yj)(),t=(0,l.iH)(1);return(0,r.bv)((()=>{"/checkout"===e.path&&(t.value=1),"/buyerInfo"===e.path&&(t.value=2),"/sendOrder"===e.path&&(t.value=3)})),{step:t}}},u=o(89);const d=(0,u.Z)(i,[["render",c],["__scopeId","data-v-ac7df154"]]);var _=d},844:function(e,t,o){o.r(t),o.d(t,{default:function(){return P}});var r=o(3396),n=o(7139);const s=e=>((0,r.dD)("data-v-0a823165"),e=e(),(0,r.Cn)(),e),c={class:"send-order"},l=s((()=>(0,r._)("div",{class:"header"},[(0,r._)("h1",null,"送出訂單")],-1))),a={class:"order"},i={class:"container"},u={class:"table text-center text-white"},d=s((()=>(0,r._)("thead",null,[(0,r._)("tr",null,[(0,r._)("th",{scope:"col"},"名稱"),(0,r._)("th",{scope:"col"},"價格 / 數量"),(0,r._)("th",{scope:"col"},"合計")])],-1))),_=s((()=>(0,r._)("th",{colspan:"1"},null,-1))),p={colspan:"1",class:""},h={colspan:"1"},f=s((()=>(0,r._)("tr",null,[(0,r._)("th",{colspan:"4"})],-1))),w=s((()=>(0,r._)("tr",null,[(0,r._)("th",{scope:"col"},"訂購人 / 電話"),(0,r._)("th",{scope:"col"},"收件人 / 電話"),(0,r._)("th",{scope:"col"},"收件地址")],-1))),v={class:"row justify-content-center"},m={class:"btn-group col-md-6"};function b(e,t,o,s,b,g){const I=(0,r.up)("ProgressBar"),C=(0,r.up)("router-link"),y=(0,r.up)("Footer");return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r._)("div",c,[l,(0,r.Wm)(I),(0,r._)("div",a,[(0,r._)("div",i,[(0,r._)("table",u,[d,(0,r._)("tbody",null,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(s.itemInfo,(e=>((0,r.wg)(),(0,r.iD)("tr",{key:e.id},[(0,r._)("td",null,(0,n.zw)(e.title),1),(0,r._)("td",null,"$"+(0,n.zw)(e.price)+" / "+(0,n.zw)(e.qty),1),(0,r._)("td",null,"$"+(0,n.zw)(e.totalPrice),1)])))),128)),(0,r._)("tr",null,[_,(0,r._)("th",p,"總計 $"+(0,n.zw)(s.orderInfo.sum),1),(0,r._)("th",h,"折扣後: $"+(0,n.zw)(s.orderInfo.couponPrice),1)]),f,w,(0,r._)("tr",null,[(0,r._)("td",null,(0,n.zw)(s.orderInfo.buyerName)+" / "+(0,n.zw)(s.orderInfo.buyerPhone),1),(0,r._)("td",null,(0,n.zw)(s.orderInfo.recipientName)+" / "+(0,n.zw)(s.orderInfo.recipientPhone),1),(0,r._)("td",null,(0,n.zw)(s.orderInfo.recipientAddress),1)])])]),(0,r._)("div",v,[(0,r._)("div",m,[(0,r.Wm)(C,{to:"/buyerInfo",class:"btn"},{default:(0,r.w5)((()=>[(0,r.Uk)("上一頁")])),_:1}),(0,r.Wm)(C,{to:"/",class:"btn",onClick:s.sendOrder},{default:(0,r.w5)((()=>[(0,r.Uk)("送出訂單")])),_:1},8,["onClick"])])])])])]),(0,r.Wm)(y)],64)}var g=o(4006),I=o(8013),C=o(65),y=o(2492),k=o.n(y),z=o(6943),D={components:{Footer:I.Z,ProgressBar:g.Z},setup(){const e=(0,C.oR)(),t=(0,r.Fl)((()=>e.state.checkout.orderInfo)),o=(0,r.Fl)((()=>e.state.checkout.orderInfo.buyItem));(0,r.bv)((()=>{e.commit("checkout/initSessionStorage")}));const n=async()=>{const t=(new Date).toLocaleString();try{e.commit("showLoadingCircle",!0);const o=await JSON.parse(sessionStorage.getItem("orderInfo"));await z.Z.post("https://bulbgo.onrender.com/order",{...o,date:t}),e.commit("shoppingCart/resetCartAndUser"),await e.dispatch("shoppingCart/saveOnFirebase"),sessionStorage.removeItem("orderInfo"),e.commit("showLoadingCircle",!1),k().fire({icon:"success",title:"訂單已送出",showConfirmButton:!1,timer:1500})}catch(o){alert(o),console.log(o)}};return{orderInfo:t,itemInfo:o,sendOrder:n}}},Z=o(89);const F=(0,Z.Z)(D,[["render",b],["__scopeId","data-v-0a823165"]]);var P=F}}]);
//# sourceMappingURL=844.8acfad34.js.map