{"version":3,"file":"js/27.a94d24f1.js","mappings":"sPACOA,MAAM,W,GACHA,MAAM,uC,UACVC,EAAAA,EAAAA,GAAW,UAAP,MAAE,K,GAODD,MAAM,qB,0EATfE,EAAAA,EAAAA,IAaM,MAbNC,EAaM,EAZJF,EAAAA,EAAAA,GAWO,OAXPG,EAWO,CAVLC,GAAW,SACXJ,EAAAA,EAAAA,GACmE,SAD5DK,KAAK,QAAQC,YAAY,WAChC,aAAW,IAAIP,MAAM,e,qCAA6BQ,EAAAA,UAAUC,MAAK,I,iBAAfD,EAAAA,UAAUC,WAAK,G,MAA7B,OAA8B,SAClER,EAAAA,EAAAA,GACsE,SAD/DK,KAAK,WAAWC,YAAY,QACnC,aAAW,IAAIP,MAAM,e,qCAA6BQ,EAAAA,UAAUE,SAAQ,I,iBAAlBF,EAAAA,UAAUE,cAAQ,G,MAAhC,OAEpCT,EAAAA,EAAAA,GAAsD,UAA9CD,MAAM,MAAOW,QAAK,8BAAUH,EAAAA,OAAAA,EAAAA,SAAAA,IAAK,eAAE,OAC3CP,EAAAA,EAAAA,GAEM,MAFNW,EAEM,EADJC,EAAAA,EAAAA,IAA2CC,EAAAA,CAA9BC,GAAG,YAAU,C,kBAAC,IAAE,UAAF,S,iFAanC,GACEC,QACE,MAAMC,GAAYC,EAAAA,EAAAA,IAAI,CAAC,GACjBC,GAASC,EAAAA,EAAAA,MACTC,GAAQC,EAAAA,EAAAA,MAEdC,eAAeC,IACb,IACEH,EAAMI,OAAO,qBAAqB,GAClC,MAAMC,QAAYC,EAAAA,EAAAA,KAAY,6CAA4CV,EAAUW,MAAO,CAAEC,iBAAiB,UACpGH,EAAII,KAAKC,SAEjBC,aAAaC,QAAQ,SAAUP,EAAII,KAAKI,MACxCb,EAAMI,OAAO,eAAe,SACtBJ,EAAMc,SAAS,wCACfd,EAAMc,SAAS,0CACfhB,EAAOiB,KAAK,kBAElBC,IAAAA,KAAU,CACRC,MAAOZ,EAAII,KAAKS,IAChBC,KAAM,QACNC,mBAAmB,EACnBC,MAAO,OAGXrB,EAAMI,OAAO,qBAAqB,EAIpC,CAHE,MAAOkB,GAEPC,MAAM,QAASD,EACjB,CACF,CAEA,MAAO,CAAE1B,YAAWO,QACtB,G,QClDF,MAAMqB,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://light-bulb/./src/views/front/LoginView.vue","webpack://light-bulb/./src/views/front/LoginView.vue?b4a2"],"sourcesContent":["<template>\n  <div class=\"wrapper\">\n    <form class=\"col-10 col-md-6 col-lg-3 login-wrap\">\n      <h2>登入</h2>\n      <input type=\"email\" placeholder=\"請輸入Email\"\n      aria-label=\"a\" class=\"form-control\" v-model.trim=\"inputData.email\">\n      <input type=\"password\" placeholder=\"請輸入密碼\"\n      aria-label=\"a\" class=\"form-control\" v-model.trim=\"inputData.password\">\n      <!-- form裡click記得prevent -->\n      <button class=\"btn\" @click.prevent=\"login\">登入</button>\n      <div class=\"register-btn-wrap\">\n        <router-link to=\"register\">註冊</router-link>\n      </div>\n    </form>\n  </div>\n</template>\n\n<script>\nimport { ref } from 'vue';\nimport axios from 'axios';\nimport { useRouter } from 'vue-router';\nimport Swal from 'sweetalert2';\nimport { useStore } from 'vuex';\n\nexport default {\n  setup() {\n    const inputData = ref({});\n    const router = useRouter();\n    const store = useStore();\n\n    async function login() {\n      try {\n        store.commit('showLoadingCircle', true);\n        const res = await axios.post(`${process.env.VUE_APP_API}/customer/login`, inputData.value, { withCredentials: true });\n        if (await res.data.success) {\n          // 取出id存入localStorage 避免vuex刷新state遺失問題\n          localStorage.setItem('userId', res.data.user);\n          store.commit('loginStatus', true);\n          await store.dispatch('shoppingCart/getCartOnFirebase');\n          await store.dispatch('myFavorite/getFavoriteOnFirebase');\n          await router.push('/user/account');\n        } else {\n          Swal.fire({\n            title: res.data.msg,\n            icon: 'error',\n            showConfirmButton: false,\n            timer: 1500,\n          });\n        }\n        store.commit('showLoadingCircle', false);\n      } catch (e) {\n        // eslint-disable-next-line no-alert\n        alert('error', e);\n      }\n    }\n\n    return { inputData, login };\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.wrapper {\n  height: 100vh;\n  background-image: url('@/assets/img/loginBG.jpg');\n  background-size: cover;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\nform.login-wrap {\n  border: 1px solid #999;\n  padding: 2rem;\n  border-radius: 1rem;\n  box-shadow: 0 0 5px #111111d0;\n  backdrop-filter: blur(10px);\n  background: #222222a0;\n\n  h2 {\n    color: #fff;\n    text-align: center;\n  }\n\n  input {\n    margin: 2rem 0;\n    background: #111;\n    color: #fff;\n    border: 1px solid #333;\n\n    &:focus {\n      box-shadow: none;\n      border: 1px solid rgb(255, 211, 77);\n    }\n  }\n\n  button {\n    width: 100%;\n    background: rgb(255, 211, 77);\n\n    &:hover {\n      color: #fff;\n    }\n  }\n\n  .register-btn-wrap {\n    display: flex;\n    justify-content: center;\n    padding: 2rem 0;\n\n    a {\n      text-decoration: none;\n      color: #fff;\n    }\n  }\n}\n</style>\n","import { render } from \"./LoginView.vue?vue&type=template&id=44a5616e&scoped=true\"\nimport script from \"./LoginView.vue?vue&type=script&lang=js\"\nexport * from \"./LoginView.vue?vue&type=script&lang=js\"\n\nimport \"./LoginView.vue?vue&type=style&index=0&id=44a5616e&lang=scss&scoped=true\"\n\nimport exportComponent from \"S:\\\\myProject\\\\bulb\\\\light-bulb-frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-44a5616e\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","type","placeholder","$setup","email","password","onClick","_hoisted_4","_createVNode","_component_router_link","to","setup","inputData","ref","router","useRouter","store","useStore","async","login","commit","res","axios","value","withCredentials","data","success","localStorage","setItem","user","dispatch","push","Swal","title","msg","icon","showConfirmButton","timer","e","alert","__exports__","render"],"sourceRoot":""}