{"version":3,"file":"js/532.9140963c.js","mappings":"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","sources":["webpack://light-bulb/./src/components/FooterComponent.vue","webpack://light-bulb/./src/components/FooterComponent.vue?fdb7","webpack://light-bulb/./src/views/front/AccountView.vue","webpack://light-bulb/./src/views/front/AccountView.vue?82eb"],"sourcesContent":["<template>\n  <div class=\"footer\">\n    <h3>© {{ year }} by Chen Chien Yu</h3>\n  </div>\n</template>\n\n<script>\nexport default {\n  setup() {\n    const year = new Date().getFullYear();\n    return { year };\n  },\n\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.footer{\n  text-align: center;\n  padding: 2rem;\n  background: rgb(8, 8, 11);;\n  h3{\n    font-size: 1rem;\n    color: #aaa;\n    font-weight: 300;\n  }\n}\n</style>\n","import { render } from \"./FooterComponent.vue?vue&type=template&id=b977a274&scoped=true\"\nimport script from \"./FooterComponent.vue?vue&type=script&lang=js\"\nexport * from \"./FooterComponent.vue?vue&type=script&lang=js\"\n\nimport \"./FooterComponent.vue?vue&type=style&index=0&id=b977a274&lang=scss&scoped=true\"\n\nimport exportComponent from \"S:\\\\myProject\\\\bulb\\\\light-bulb-frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-b977a274\"]])\n\nexport default __exports__","<template>\n  <div class=\"wrapper\">\n    <form class=\"col-10 col-md-5 col-lg-2\">\n      <h2>我的帳戶</h2>\n      <div>\n        <label for=\"email\">\n          <p>Email</p>\n          <input type=\"email\" class=\"form-control\"\n          v-model.trim=\"userInfo.email\" disabled>\n        </label>\n      </div>\n      <div>\n        <label for=\"name\">\n          <p>姓名</p>\n          <input type=\"text\" class=\"form-control\"\n          v-model.trim=\"userInfo.name\">\n        </label>\n      </div>\n      <div>\n        <label for=\"address\">\n          <p>地址</p>\n          <input type=\"text\" class=\"form-control\"\n          v-model.trim=\"userInfo.address\">\n        </label>\n      </div>\n      <div>\n        <label for=\"tel\">\n          <p>電話</p>\n          <input type=\"tel\" class=\"form-control\"\n          v-model.trim=\"userInfo.tel\">\n        </label>\n      </div>\n      <button class=\"btn\" @click.prevent=\"updateUserData\">更新資料</button>\n\n    </form>\n    <Footer />\n  </div>\n</template>\n\n<script>\nimport { ref } from 'vue';\nimport axios from 'axios';\nimport Footer from '@/components/FooterComponent.vue';\nimport { useRouter } from 'vue-router';\nimport { useStore } from 'vuex';\nimport Swal from 'sweetalert2';\n\nexport default {\n  components: { Footer },\n  setup() {\n    const store = useStore();\n    const verifyID = ref('');\n    const router = useRouter();\n    const userInfo = ref({});\n\n    async function getUserData() {\n      try {\n        store.commit('showLoadingCircle', true);\n        // 用get 這裡的Credentials要放第二參數\n        const res = await axios\n          .get(`${process.env.VUE_APP_API}/customer/user/${verifyID.value}`, { withCredentials: true });\n        const {\n          name, email, address, tel,\n        } = await res.data;\n\n        userInfo.value = {\n          name,\n          email,\n          address,\n          tel,\n        };\n        store.commit('showLoadingCircle', false);\n      } catch (e) {\n        console.log(e);\n      }\n    }\n\n    async function verifyLogin() {\n      try {\n        store.commit('showLoadingCircle', true);\n        // 注意第二參數，這裡使用空物件佔位，因為post Credentials要放第三參數 !!!\n        const res = await axios.post(`${process.env.VUE_APP_API}/customer/verify`, {}, { withCredentials: true });\n        if (!res.data.isLogin) {\n          await router.push('/login');\n        } else {\n          verifyID.value = await res.data.user;\n          store.commit('loginStatus', true);\n          await getUserData();\n        }\n        store.commit('showLoadingCircle', false);\n      } catch (e) {\n        console.log(e);\n      }\n    }\n\n    async function updateUserData() {\n      if (userInfo.value.name === '') {\n        Swal.fire({\n          title: '姓名欄位不得為空',\n          icon: 'error',\n          showConfirmButton: false,\n          timer: 1500,\n        });\n        return;\n      }\n      try {\n        const res = await axios\n          .put(`${process.env.VUE_APP_API}/customer/user/${verifyID.value}`, userInfo.value, { withCredentials: true });\n        Swal.fire({\n          title: res.data.msg,\n          icon: 'success',\n          showConfirmButton: false,\n          timer: 1500,\n        });\n      } catch (e) {\n        console.log(e);\n      }\n    }\n\n    verifyLogin();\n\n    return {\n      verifyLogin, getUserData, verifyID, userInfo, updateUserData,\n    };\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n\n.wrapper {\n  background: rgb(18, 18, 29);\n  position: fixed;\n  top: 0;\n  bottom: 0;\n  right: 0;\n  left: 0;\n  padding-top: 10rem;\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n\n  form {\n    margin: 0 auto;\n  }\n\n  h2 {\n    color: #fff;\n    margin-bottom: 2rem;\n  }\n\n  label {\n    width: 100%;\n    color: #fff;\n    padding-bottom: 1rem;\n\n    p {\n      margin-bottom: .3rem;\n    }\n  }\n\n  input {\n    background: #111;\n    color: #fff;\n\n    &:focus {\n      box-shadow: none;\n      border: 1px solid rgb(255, 211, 77);\n    }\n  }\n\n  input[type = email] {\n    color: #aaa;\n  }\n\n  button {\n    margin-top: 1rem;\n    width: 100%;\n    background: rgb(255, 211, 77);\n\n    &:hover {\n      color: #fff;\n    }\n  }\n}\n</style>\n","import { render } from \"./AccountView.vue?vue&type=template&id=310097ce&scoped=true\"\nimport script from \"./AccountView.vue?vue&type=script&lang=js\"\nexport * from \"./AccountView.vue?vue&type=script&lang=js\"\n\nimport \"./AccountView.vue?vue&type=style&index=0&id=310097ce&lang=scss&scoped=true\"\n\nimport exportComponent from \"S:\\\\myProject\\\\bulb\\\\light-bulb-frontend\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-310097ce\"]])\n\nexport default __exports__"],"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","$setup","setup","year","Date","getFullYear","__exports__","render","for","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","type","email","disabled","_hoisted_6","_hoisted_7","name","_hoisted_8","_hoisted_9","address","_hoisted_10","_hoisted_11","tel","onClick","_createVNode","_component_Footer","components","Footer","store","useStore","verifyID","ref","router","useRouter","userInfo","async","getUserData","commit","res","axios","value","withCredentials","data","e","console","log","verifyLogin","isLogin","user","push","updateUserData","Swal","title","msg","icon","showConfirmButton","timer"],"sourceRoot":""}